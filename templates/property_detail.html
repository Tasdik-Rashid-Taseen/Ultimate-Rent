<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta charset="utf-8">
    <title>Ultimate Rent</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="img/favicon/site.webmanifest">
    <link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/static/css/style.css" rel="stylesheet">
    <title>{{ property.title }} - Details</title>
    {% load static %}
    <style>

        /* Style for the modal - Fullscreen overlay */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top of everything */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Style for the close button */
        .close {
            position: absolute;
            top: 20px;
            right: 40px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Style for the modal content - the image */
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            max-height: 80%;
        }

        /* Animation for the modal content */
        @keyframes zoom {
            from {transform: scale(0)}
            to {transform: scale(1)}
        }

        .modal-content {
            animation-name: zoom;
            animation-duration: 0.6s;
        }

        /* Style for the caption under the image in the modal */
        #caption {
            color: #ccc;
            font-size: 16px;
            padding: 10px 20px;
            text-align: center;
            max-width: 700px;
            margin: auto;
            display: block;
        }

        .tab-container {
            text-align: center;
            margin: 20px auto; /* Adjust top and bottom margin as needed */
            /* Other styles */
        }

        .tab-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: inline-flex;
            /* Other styles */
        }

        .tab-link {
            display: block;
            padding: 10px 20px;
            margin-right: 10px;
            text-decoration: none;
            color: #000;
            background-color: #fff; /* Assuming the background of the tab is white */
            border: 1px solid #fff; /* Borders match the background color */
            transition: all 0.3s ease;
            /* Other styles */
        }

        .tab-link:hover {
            border-color: #ccc; /* Keep grey border on hover */
            background-color: #f4f4f4; /* Optional: Change background on hover */
        }
        .tab-link.active {
            border-color: #ccc; /* Grey border for active tab */
            border-bottom: 3px solid #87CEEB; /* Light sky blue bottom border for active tab */
            font-weight: bold; /* Make the font bold for the active tab */
        }

        /* General reset and base styles */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .page-wrapper {
            max-width: 1200px;
            margin: auto;
        }

       /* Container for the property details and image grid */
        .property-detail-container {
            display: flex;
            flex-wrap: wrap; /* Allows the columns to wrap on smaller screens */
            max-width: 1200px;
            margin: auto;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .left-column, .right-column {
            width: 50%; /* Adjust as needed */
        }

        /* New summary column below the images */
        .summary-column {
            width: 100%; /* Full width */
            padding: 20px;
            box-sizing: border-box; /* Include padding in the width calculation */
        }

        .right-column {
            width: 300px; /* Set the width for the sidebar */
            margin-left: 20px; /* Add some space between this column and the main content */
            padding: 20px; /* Padding inside the right column */
            background: #fff; /* White background */
            border-radius: 5px; /* Rounded corners for the container */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Shadow for some depth */

        }

        .details-list {
            margin-bottom: 20px; /* Space between the form and whatever comes next */
        }

        .details-list h3 {
            margin-bottom: 15px;
            color: #333; /* Darker text color for the heading */
            text-align: center; /* Center the heading */
        }

        .details-list form {
            display: flex;
            flex-direction: column; /* Stack the inputs vertically */
        }

        .details-list form input[type="text"],
        .details-list form input[type="email"],
        .details-list form input[type="tel"] {
            padding: 10px;
            margin-bottom: 10px; /* Space between the inputs */
            border: 1px solid #ddd; /* Light grey border */
            border-radius: 4px; /* Rounded corners for the inputs */
        }

        .details-list form button {
            padding: 10px;
            background-color: #00B98E; /* Green background for the button */
            color: white; /* White text color */
            border: none; /* No border */
            border-radius: 4px; /* Rounded corners for the button */
            cursor: pointer; /* Pointer cursor for the button */
            transition: background-color 0.3s; /* Transition for a smooth color change on hover */
        }

        .details-list form button:hover {
            background-color: #0e9475; /* Slightly darker green on hover for the button */
        }

        .left-column {
            flex-grow: 1; /* Take remaining space */
            max-width: calc(100% - 320px); /* Subtract the width of the right column plus margin */
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* Change this to control the number of columns */
            gap: 10px;
        }

        .grid-item {
            position: relative; /* Needed for absolute positioning of the overlay */
            overflow: hidden;
        }

        .grid-item img {
            width: 100%;
            height: auto;
            object-fit: cover; /* This will crop the images to fill their areas */
        }

        /* Making the first image larger */
        .grid-item:first-child {
            grid-column: span 2;
            grid-row: span 2;
        }

        /* Overlay for the last image, indicating more images are available */
        .grid-item:last-child::after {
            content: '+20 IMAGES'; /* Adjust the number accordingly */
            position: absolute;
            bottom: 0;
            right: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 5px 10px;
            font-size: 0.9em;
        }


        .property-info h1 {
            font-size: 1.5em;
        }

        .property-info p {
            margin: 0.5em 0;
        }

        .property-info strong {
            font-weight: bold;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .left-column, .right-column {
                width: 100%; /* Full width for both columns */
                margin-left: 0; /* Reset margin */
            }

            .right-column {
                /* Make the contact form appear below the images */
                order: 2;
            }

            .left-column {
                order: 1; /* Ensure images appear first */
            }

        }
                /* Style for the contact form container */

        #location-map {
            width: 100%;
            height: 400px; /* Adjust the height as needed */
            position: relative;
            margin-top: 20px;
        }

        iframe#gmap_canvas {
            width: 100%;
            height: 100%;
        }
        /* Overlay container */
        .overlay-backdrop {
          display: none; /* Hidden by default */
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
          z-index: 999; /* Below the overlay but above other content */
        }
        .overlay {
          display: none; /* Hidden by default */
          position: fixed;
          top: 50%;
          left: 50%;
          width: 50%; /* Set width to half of the viewport width */
          height: 70%; /* Set height to half of the viewport height */
          transform: translate(-50%, -50%); /* Center the overlay on the screen */
          background: white; /* Set the background color to white */
          z-index: 1000; /* Ensure it appears above other content */
          overflow: auto; /* Enable scrolling for overflow content */
          padding: 5px; /* Add padding on all sides */
          box-sizing: border-box; /* Padding included in width and height */
          border-radius: 8px; /* Rounded corners */
        }
        .overlay-content {
            padding: 20px; /* Add padding inside the overlay content */
        }

        /* Close button styles */
        .close-overlay {
          position: absolute; /* Absolute position to place it relative to its nearest positioned ancestor */
          top: 10px; /* Spacing from the top */
          right: 10px; /* Spacing from the right */
          cursor: pointer;
          font-size: 1.5em; /* Increase the size of the close character */
        }

        .contact-info, .schedule-visit, .mortgage-calculator, .virtual-tour, .submit-offer {
          margin-bottom: 20px;
        }
        /* Styling for the Contact Section */
        .contact-section {
            background-color: #f9f9f9; /* Light background for the section */
            border-radius: 5px; /* Rounded corners */
            padding: 15px; /* Padding inside the section */
            margin-bottom: 20px; /* Space below the section */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Subtle shadow for depth */
        }

        .contact-section h3 {
            color: #333; /* Dark color for the heading */
            margin-bottom: 10px; /* Space below the heading */
        }

        .contact-section p {
            color: #555; /* Slightly lighter color for the text */
            font-size: 1rem; /* Standard font size for text */
            line-height: 1.5; /* Spacing between lines */
            margin-bottom: 8px; /* Space below each line of text */
        }

        .contact-section a {
            color: #00B98E; /* Color for links */
            text-decoration: none; /* Remove underline from links */
        }

        .contact-section a:hover {
            text-decoration: underline; /* Underline links on hover for interactivity */
        }

        .mortgage-calculator input, .submit-offer input {
          width: calc(50% - 10px);
          margin-right: 10px;
          display: inline-block;
        }

        .mortgage-calculator button, .submit-offer button {
          width: calc(50% - 10px);
          display: inline-block;
        }

        button {
          padding: 10px 20px;
          margin-top: 10px;
          border: none;
          background-color: #00B98E;
          color: #ffff;
          cursor: pointer;
        }

        button:hover {
          background-color: #09876a;
        }

        @media (max-width: 768px) {
          .overlay-inner {
            width: 90%;
            margin-top: 10%;
          }

        .mortgage-calculator input, .submit-offer input {
            width: 100%;
            margin-right: 0;
          }

        .mortgage-calculator button, .submit-offer button {
            width: 100%;
          }
        }

        /* Style for your navigation bar */
        .nav-bar {
            width: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px; /* Adjust padding to match property-detail-container */
            background: #fff; /* Or any color that matches your design */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);

        }


        /* Style for the navigation items on the left */
        .nav-items {
            display: flex;
            gap: 10px; /* adjust the gap as necessary */
        }

        /* Style for the 'Site Visit' navigation item to push it to the right */
        .nav-item-right {
            margin-left: auto;
        }
        .custom-overlay {
            position: fixed; /* Fixed position */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.6); /* Semi-transparent background */
            z-index: 2000; /* High z-index to be on top */
            display: flex;
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
        }

        .custom-overlay-content {
            position: relative; /* Relative position for the absolute close button */
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            width: 80%;
            max-width: 600px; /* Adjust width as needed */
            /* Set a max-height and overflow to enable scrolling */
            max-height: 90vh;
            overflow-y: auto;
        }
        .custom-overlay-content::-webkit-scrollbar {
            width: 10px;
        }
        .custom-overlay-content::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .custom-overlay-content::-webkit-scrollbar-thumb {
            background: #888;
        }

        .custom-overlay-content::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .ask-question-container button {
            background-color: #00B98E; /* Example blue color */
            color: white;
            border: none;
            padding: 15px 30px; /* Larger padding for a bigger button */
            font-size: 1em; /* Adjust size as needed */
            cursor: pointer;
            border-radius: 5px; /* Rounded corners */
            outline: none; /* Remove outline on focus for a clean look */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Optional: add a subtle shadow */
            width: 80%; /* Or fixed width as per your design */
            max-width: 300px; /* Maximum width of the button */
        }

        .custom-closebtn {
            position: absolute;
            top: 10px; /* Position from the top */
            right: 10px; /* Position from the right */
            font-size: 25px;
            color: #000; /* Button color */
            cursor: pointer;
            z-index: 2100; /* Above the overlay content */
        }

        /* Continue with specific styles for your content */

        body {
            margin: 0;
            padding: 0;
            /* Prevent scrolling when overlay is active */
            overflow: hidden;
        }

        /* The overlay covering the entire screen */
        .rent-overlay {
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
            z-index: 1000; /* Make sure it's above other content */
        }

        /* The modal content box */
        .rent-overlay-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            width: 90%; /* Adjust as necessary, or use max-width for larger screens */
            max-width: 600px; /* Maximum width of the content box */
            max-height: 80vh; /* Adjust as necessary to fit screen */
            overflow-y: auto; /* Enable scrolling for overflow content */
            position: relative; /* Position relative to the overlay */
        }

        /* Close button styles */
        .rent-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 30px;
            cursor: pointer;
            color: #707070;
        }

        /* Dropdown select element */
        .rental-dropdown select {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Cost section styles */
        .rental-costs, .one-time-costs, .move-in-cost {
            background-color: #f9f9f9;
            border-left: 5px solid #00B98E;
            padding: 15px;
            margin: 15px 0;
        }

        /* Header styles */
        .rental-costs h3, .one-time-costs h3, .move-in-cost h3 {
            color: #00B98E;
            margin-bottom: 10px;
        }

        /* Disclaimer text styles */
        .disclaimer {
            font-size: 0.9em;
            color: #666;
            margin-top: 15px;
        }

        /* When the overlay is not active, we don't want to hide overflow on the body */
        body:not(.no-scroll) {
            overflow: auto;
        }
        .whatsapp-link {
            display: inline-block;
            background-color: #00B98E; /* WhatsApp color */
            color: #FFFFFF;
            padding: 8px 12px;
            border-radius: 4px;
            text-decoration: none;
            margin-top: 10px;
        }

        .whatsapp-link:hover {
            background-color: #0c755d; /* Darker shade for hover */
            color: white;
        }

        .stripe-btn {
    background-color: #00B98E; /* Stripe's brand color */
    color: #FFFFFF;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    text-decoration: none; /* Remove underline from the link */
    display: inline-block; /* Align properly with other inline elements */
    transition: background-color 0.3s ease;
}

.stripe-btn:hover, .stripe-btn:focus {
    background-color: #0b9071; /* Darker shade for hover and focus states */
    color: #FFFFFF;
    text-decoration: none; /* Keep underline removed on hover/focus */
}



    </style>
</head>
<body>
    <div>
        <div class="page-wrapper">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #ffffff;">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <a href="/" class="navbar-brand d-flex align-items-center text-center">
                        <div class="icon p-2 me-2">
                            <img class="img-fluid" src="/static/img/icon-deal.png" alt="Icon" style="width: 30px; height: 30px;">
                        </div>
                        <h1 class="m-0 text-primary">Ultimate Rent</h1>
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="navbarResponsive">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="#overview" onclick="showOverviewOverlay()">Overview</a></li>
                            <li class="nav-item"><a class="nav-link" href="#location" onclick="toggleMapDisplay()">Location</a></li>
                            <li class="nav-item"><a class="nav-link" href="#buy" onclick="toggleBuyOptions()">Buy</a></li>
                            <li class="nav-item"><a class="nav-link" href="#rent" onclick="toggleRentOverlay()">Rent</a></li>
                            {% if user.is_authenticated %}
                                {% if not is_owner %}
                                    <li class="nav-item"><a class="nav-link" href="{% url 'schedule-visit' property_id=property.id %}">Schedule a Visit</a></li>
                                {% endif %}
                            {% else %}
                                <li class="nav-item"><a class="nav-link" href="{% url 'signin' %}?next={{ request.path }}">Schedule a Visit</a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Overlay overview Div, initially hidden -->
        <div id="overviewOverlay" class="custom-overlay" style="display: none;">
            <div class="custom-overlay-content">
                <span class="custom-closebtn" onclick="closeOverviewOverlay()">&times;</span>
                <h2>Building Overview</h2>
                <div class="office-hours">
                    <h3>Office hours</h3>
                    <p>Mon - Fri: 10 am - 6 pm</p>
                    <p>Sat: 10 am - 6 pm</p>
                    <p>Sun: 12 pm - 5 pm</p>
                </div>
                <div class="listed-by">
                    <h3>Listed by management company</h3>
                    <p>Isabella Apartment Homes</p>
                    <p>Sequoia Equities Inc.</p>
                    <p>✓ Verified Source</p>
                    <p>(720) 794-5949</p>
                    <div class="ask-question-container">
                        <button onclick="askQuestion()">Ask a question</button>
                    </div>
                </div>
                <div class="facts-and-features">
                    <h3>Facts and features</h3>
                    <h4>Key features</h4>
                    <ul>
                        <li>Pet-friendly</li>
                        <li>In-unit dryer, in-unit washer</li>
                        <li>Other parking, parking lot, surface parking lot</li>
                        <li>Patio</li>
                    </ul>
                    <h4>Building Amenities</h4>
                    <ul>
                        <li>Community rooms</li>
                        <li>Conference room</li>
                        <li>Fitness center</li>
                        <li>Game room</li>
                    </ul>
                    <h4>Other</h4>
                    <ul>
                        <li>Swimming pool</li>
                    </ul>
                    <h4>Outdoor common areas</h4>
                    <ul>
                        <li>Patio</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- buy Options Overlay (initially hidden) -->
        <div id="overlayBackdrop" class="overlay-backdrop" onclick="closeBuyOptions()"></div>
        <div id="buyOptionsOverlay" class="overlay" style="display: none;">
            <div class="overlay-content">
                <span class="close-overlay" onclick="closeBuyOptions()">&times;</span>
                <!-- 1. Contact Information -->
                <div class="contact-section">
                    <h3>Contact Information</h3>
                    <p><strong>Agent Name:</strong> Jubel Ahmed</p>
                    <p><strong>Email:</strong> <a href="mailto:john.doe@example.com">jubel.ahmed@example.com</a></p>
                    <p><strong>Phone:</strong> <a href="tel:+123456789">+123 456 789</a></p>
                </div>
                <!-- Owner Contact Information -->
                <div class="contact-section">
                    <h3>Owner Information</h3>
                    {% if property.phone_number %}
                        <p><strong>Phone:</strong> <a href="tel:{{ property.phone_number }}">{{ property.phone_number }}</a></p>
                    {% endif %}
                    {% if property.email %}
                        <p><strong>Email:</strong> <a href="mailto:{{ property.email }}">{{ property.email }}</a></p>
                    {% endif %}
                    <p><a href="https://wa.me/{{ property.phone_number|urlencode }}" target="_blank" class="whatsapp-link">Chat on WhatsApp</a></p>
                </div>
                <!-- Mortgage Calculator -->
                <div class="mortgage-calculator-section">
                    <h3>Mortgage Calculator</h3>
                    <input type="number" id="propertyPrice" placeholder="Property Price">
                    <input type="number" id="downPayment" placeholder="Down Payment">
                    <input type="number" id="interestRate" placeholder="Interest Rate (%)">
                    <input type="number" id="loanTerm" placeholder="Loan Term (years)">
                    <button onclick="calculateMortgage()">Calculate</button>
                    <p id="monthlyPayment">Monthly Payment: </p>
                </div>
                <!-- 4. Virtual Tour -->
                <div class="virtual-tour-section">
                    <h3>Virtual Tour</h3>
                    <a href="virtual-tour-link" target="_blank">Take a Virtual Tour</a>
                </div>
                <!-- 5. Submit an Offer -->
                <div class="submit-offer-section">
                    <h3>Make an Offer</h3>
                    <form id="offerForm" method="post" action="{% url 'submit_offer' property.id %}">
                        {% csrf_token %}
                        <input type="number" name="offer" placeholder="Your Offer" required>
                        <input type="text" name="name" placeholder="Your Name" required>
                        <input type="email" name="email" placeholder="Your Email" required>
                        <button type="submit">Submit Offer</button>
                    </form>
                    <!-- Message block placed directly below the form -->
                    {% if messages %}
                    <div class="offer-messages">
                        {% for message in messages %}
                        <div>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div id="rentOverlay" class="rent-overlay" style="display: none;">
            <div class="rent-overlay-content">
                <span class="rent-close-btn" onclick="closeRentOverlay()">&times;</span>
                <h2>Rental costs & fees</h2>
                <div class="rental-dropdown">
                    <label for="unitType">Select a unit-type to view your estimated move-in costs:</label>
                    <select id="unitType" name="unitType">
                        <option value="1bed">1 bed</option>
                        <option value="2bed">2 bed</option>
                        <option value="3bed">3 bed</option>
                    </select>
                </div>
                <div class="rental-costs">
                    <h3>Monthly costs</h3>
                    <p id="monthlyRent">Monthly rent: ---</p>
                    <p id="parkingFee">Parking fee: $200</p>
                    <p id="petFee">Pet fee: $50</p>
                    <p id="estMonthlyCost">Est. monthly cost: $2050</p>
                </div>
                <div class="one-time-costs">
                    <h3>One-time costs</h3>
                    <p id="securityDeposit">Security deposit: ---</p>
                    <p id="applicationFee">Application fee: $50</p>
                    <p id="adminFee">Administration fee: $100</p>
                    <p id="petDeposit">Pet deposit: $150</p>
                    <p id="estOneTimeCost">Est. one-time cost: ---</p>
                </div>
                <div class="total-move-in-cost">
                    <h3>Total Est. Move-In Cost</h3>
                    <p id="totalMoveInCost">---</p>
                </div>
                <p class="disclaimer">
                    Pricing is subject to change. All calculations are estimates and provided for informational purposes only.
                </p>
                <a href="{% url 'payment_form' %}" class="btn btn-primary stripe-btn">Pay with</a>
            </div>
        </div>

        <div class="property-detail-container">
            <div class="left-column">
                <!-- Assuming 'property.images.all' returns at least one image -->
                <div class="image-grid">
                    {% with property.images.all as images %}
                        <div class="grid-item main-image">
                            <img src="{{ images.0.image.url }}" alt="Main image description" onclick="openModal(this);">
                        </div>
                        {% for image in images %}
                            {% if forloop.counter > 1 %}
                                <div class="grid-item{% if forloop.counter == images|length %} more-images{% endif %}">
                                    <img src="{{ image.image.url }}" alt="Image description" onclick="openModal(this);">
                                    {% if forloop.counter == images|length %}
                                        <div class="overlay">+{{ images|length|add:"-1" }} IMAGES</div>
                                    {% endif %}
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endwith %}
                </div>
            </div>
            <div class="right-column">
                <div class="details-list">
                    <h3>Request a Call Back</h3>
                    <form method="post">
                        {% csrf_token %}
                        <input type="text" name="name" placeholder="Name">
                        <input type="email" name="email" placeholder="Email">
                        <input type="tel" name="phone" placeholder="Phone">
                        <button type="submit">Request Call Back</button>
                    </form>
                </div>
            </div>
            <div class="summary-column">
                <h2>Property Summary</h2>
                <div class="details-list">
                    <!-- Property summary details here -->
                    <p><strong>Name:</strong> {{ property.title }}</p>
                    <p><strong>Type:</strong> {{ property.get_category_display }}</p>
                    <p><strong>Property For:</strong> {{ property.get_sale_or_rent_display }}</p>
                    <p><strong>Location:</strong> {{ property.address }}</p>
                    <p><strong>Size:</strong> {{ property.area }} sqft</p>
                    <p><strong>Deposit Amount:</strong> {{ property.deposit_amount }}</p>
                    <p><strong>Preferred Tenant:</strong> {{ property.preferred_tenant }}</p>
                    <p><strong>Balconies:</strong> {{ property.balconies }}</p>
                    <p><strong>Garages:</strong> {{ property.garage }}</p>
                    <p><strong>Furnishing:</strong> {{ property.furnishing_status }}</p>
                    <p><strong>Bedrooms:</strong> {{ property.bedroom_count }}</p>
                    <p><strong>Baths:</strong> {{ property.bathroom_count }}</p>
                    <p><strong>Available From:</strong> {{ property.possession_date }}</p>
                </div>
            </div>
        </div>

        <!-- The Modal -->
        <div id="myModal" class="modal">
            <!-- The Close Button -->
            <span class="close" onclick="closeModal()">&times;</span>
            <!-- Modal Content (The Image) -->
            <img class="modal-content" id="img01">
            <!-- Modal Caption (Image Description) -->
            <div id="caption"></div>
        </div>

        <div id="location-map" style="display: none;">
            <!-- Embedded Google Map -->
            <iframe id="gmap_canvas" src="https://maps.google.com/maps?q=YourLocation&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>
        </div>

        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5" style="background-color: #0E2E50">
            <div class="container py-5" style="background-color: #0E2E50; border: none">
                <div class="row g-5" style="background-color: #0E2E50; border: none">
                    <div class="col-lg-3 col-md-6" style="background-color: #0E2E50">
                        <h5 class="text-white mb-4">Get In Touch</h5>
                        <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, Sylhet, Bangladesh</p>
                        <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                        <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@example.com</p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href="https://twitter.com"><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-outline-light btn-social" href="https://facebook.com"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href="https://youtube.com"><i class="fab fa-youtube"></i></a>
                            <a class="btn btn-outline-light btn-social" href="https://linkedin.com"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Quick Links</h5>
                        <a class="btn btn-link text-white-50" href="{% url 'about' %}">About Us</a>
                        <a class="btn btn-link text-white-50" href="{% url 'contact' %}">Contact Us</a>
                        <a class="btn btn-link text-white-50" href="#services">Our Services</a>
                        <a class="btn btn-link text-white-50" href="#privacy">Privacy Policy</a>
                        <a class="btn btn-link text-white-50" href="#terms">Terms & Condition</a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Recent Posts</h5>
                        <ul class="nav flex-column">
                            <li class="nav-item mb-2">
                                <a href="#" class="nav-link p-0 text-white-50">
                                    <strong class="text-white">Understanding Real Estate Trends</strong><br>
                                    <small>March 10, 2024</small>
                                </a>
                            </li>
                            <li class="nav-item mb-2">
                                <a href="#" class="nav-link p-0 text-white-50">
                                    <strong class="text-white">Tips for First-Time Home Buyers</strong><br>
                                    <small>February 20, 2024</small>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link p-0 text-white-50">
                                    <strong class="text-white">How to Invest in Commercial Property</strong><br>
                                    <small>January 15, 2024</small>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Newsletter</h5>
                        <p>Subscribe to our newsletter for the latest updates and offers.</p>
                        <div class="position-relative mx-auto" style="max-width: 400px;">
                            <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="email" placeholder="Your email">
                            <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container pb-2" style="background-color: #0E2E50; border: none">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Ultimate Rent</a>, All Right Reserved. Designed By <a class="border-bottom" href="https://jts.com">JTS</a>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="/">Home</a>
                            <a href="/">Cookies</a>
                            <a href="/">Help</a>
                            <a href="/">FQAs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->

        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <script>
        // Your existing modal functions for image modal
        function openModal(img) {
            var modal = document.getElementById("myModal");
            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");

            modal.style.display = "block";
            modalImg.src = img.src;
            captionText.innerHTML = img.alt;
        }

        function closeModal() {
            var modal = document.getElementById("myModal");
            modal.style.display = "none";
        }

        // Function to toggle the display of the map
        function toggleMapDisplay() {
            var mapContainer = document.getElementById('location-map');
            mapContainer.style.display = mapContainer.style.display === 'none' ? 'block' : 'none';
            // Close rent options if map is displayed
            if (mapContainer.style.display === 'block') {
                closeRentOverlay();
            }
        }

        function toggleBuyOptions() {
            var overlay = document.getElementById('buyOptionsOverlay');
            var backdrop = document.getElementById('overlayBackdrop');
            if (overlay.style.display === "none" || overlay.style.display === "") {
                overlay.style.display = "block";
                backdrop.style.display = "block"; // Show the backdrop
            } else {
                overlay.style.display = "none";
                backdrop.style.display = "none"; // Hide the backdrop
            }
        }

        // Optional: Close the overlay when clicking outside of it
        window.onclick = function(event) {
            var overlay = document.getElementById('buyOptionsOverlay');
            var backdrop = document.getElementById('overlayBackdrop');
            if (event.target == backdrop) {
                overlay.style.display = "none";
                backdrop.style.display = "none"; // Hide the backdrop
            }
        }

        function closeBuyOptions() {
            document.getElementById('buyOptionsOverlay').style.display = 'none';
            document.getElementById('overlayBackdrop').style.display = 'none'; // Hide the backdrop
        }

        function calculateMortgage() {
            // Get values from inputs
            var propertyPrice = parseFloat(document.getElementById('propertyPrice').value);
            var downPayment = parseFloat(document.getElementById('downPayment').value);
            var interestRate = parseFloat(document.getElementById('interestRate').value);
            var loanTerm = parseFloat(document.getElementById('loanTerm').value);

            // Validate input values
            if (isNaN(propertyPrice) || propertyPrice <= 0) {
                alert('Please enter a valid property price.');
                return;
            }
            if (isNaN(downPayment) || downPayment < 0 || downPayment > propertyPrice) {
                alert('Please enter a valid down payment.');
                return;
            }
            if (isNaN(interestRate) || interestRate <= 0) {
                alert('Please enter a valid interest rate.');
                return;
            }
            if (isNaN(loanTerm) || loanTerm <= 0) {
                alert('Please enter a valid loan term.');
                return;
            }

            // Convert annual interest rate from percentage to a decimal and monthly rate
            var monthlyInterestRate = (interestRate / 100) / 12;

            // Convert loan term in years to number of monthly payments
            var numberOfPayments = loanTerm * 12;

            // Calculate the monthly payment
            var loanAmount = propertyPrice - downPayment;
            var monthlyPayment = loanAmount * (
                monthlyInterestRate /
                (1 - Math.pow(1 + monthlyInterestRate, -numberOfPayments))
            );

            // Display the result
            if (isFinite(monthlyPayment)) {
                monthlyPayment = monthlyPayment.toFixed(2);
                document.getElementById('monthlyPayment').innerText = "Monthly Payment: $" + monthlyPayment;
            } else {
                document.getElementById('monthlyPayment').innerText = "Please check your input values.";
            }
        }

        function toggleRentOverlay() {
            var overlay = document.getElementById('rentOverlay');
            if (overlay.style.display === 'none' || !overlay.style.display) {
                overlay.style.display = 'flex'; // Show the overlay
                document.body.classList.add('no-scroll'); // Prevent scrolling
            } else {
                overlay.style.display = 'none'; // Hide the overlay
                document.body.classList.remove('no-scroll'); // Allow scrolling
            }
        }

        function closeRentOverlay() {
            var overlay = document.getElementById('rentOverlay');
            overlay.style.display = 'none'; // Hide the overlay
            document.body.classList.remove('no-scroll'); // Allow scrolling
        }

        function showOverviewOverlay() {
            document.getElementById('overviewOverlay').style.display = 'flex';
        }

        function closeOverviewOverlay() {
            document.getElementById('overviewOverlay').style.display = 'none';
        }

        function askQuestion() {
            // Your code to handle the question asking process
            alert("Function to ask a question goes here.");
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Your additional JavaScript code
        });

        // Additional functions here
    </script>
    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Template Javascript -->
    <script src="/static/js/main.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</body>
</html>